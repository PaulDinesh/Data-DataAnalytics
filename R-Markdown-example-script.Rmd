---
title: "R Markdown Example"
author: "John O'Sullivan"
output:
  word_document: default
  html_document: default
---

```{r global_options, cache=FALSE, include=TRUE}
dataset <- read.csv("http://users.stat.ufl.edu/~winner/data/nfl2008_fga.csv")
library(caTools) # useful to split data to training and test datasets

set.seed(1456)
n=nrow(dataset)
n
indexes = sample(n,n*(80/100))
trainset=dataset[indexes,]
testset =dataset[-indexes,]
#(a)  
table(trainset$homekick) # to identify the output
#the appropriate glm is logistic regression

#(b)
fit=glm(homekick~togo+ydline+kicker,data=trainset,family='binomial')
summary(fit)
#if p-value <alpha it is significant
#since p-value for togo is less than alpha =0.05
# therefore, only togo is significant
#(C)
pred=predict(fit,testset)
predictedvalues=rep(0,length(pred))
predictedvalues[pred>0.5]=1
actual=testset$homekick
df=data.frame(actual,predictedvalues)
View(df)
#screenshot of view data ->head values

#(D)
confusion_matrix=table( predictedvalues, actual)
accuracy=mean(predictedvalues == actual) # correctness of prediction
View(confusion_matrix)
```

## R Markdown:

This is an R Markdown HTML document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents.

Creating documents with R Markdown starts with an .Rmd file that contains a combination of markdown (content with simple text formatting) and R code chunks. The .Rmd file is fed to the `knitr` package, which executes all of the R code chunks and creates a new markdown (.md) document which includes the R code and its output.

The markdown file generated by `knitr` is then processed by `pandoc` which is responsible for creating a finished web page, PDF, MS Word document, slide show, handout, book, dashboard, package vignette or other format.

This may sound complicated, but R Markdown makes it extremely simple: RStudio includes a 'Knit' button that enables you to render an .Rmd and preview it using a single click or keyboard shortcut.

First, install the package `rmarkdown`:

```{r, eval = FALSE}
install.packages("rmarkdown")
```

Next, load the library:

```{r}
library(rmarkdown)
```

Now, open an example file which is built into RStudio by going to `File -> New File -> R Markdown...`. Choose a HTML documemt first.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document.

Compare the output with the .Rmd file. Try to see what's happening with each code chunk, and try to see how to create headings, bold text, text that looks like code, etc.

Download my .Rmd file which I used to create this document, and **Knit** that document for yourself too. Again, compare the HTML file with the .Rmd file and see how I created each part. Play around with this and see what changes you can make.

### Overview of document:

I have typed a few commands below. Look at the HTML document, then examine what the .Rmd file looks like. Below, I show how to include code:

1. which **is** evaluated and shown in the document, with the output shown too
2. which is **not** evaluated, but **is** shown in the document
3. which **is** evaluated and shown in the document, but the output is **not** shown
4. which **is** evaluated but not shown in the document, while the output **is**
5. which **is** evaluated, but neither code nor output is shown at this point

### 1. Including code and output:

You can embed an R code chunk like this. Then the code and output will be displayed as below:

```{r}
2 + 2
```


You can use the `seq()` function to make sequences:

```{r}
seq(1, 7, by = 2)
# or:
seq(-1, 1, length.out = 20)
```

`length.out` and `by` are two different arguments to help you to define the structure of the sequence.

### 2. Including code but not evaluating it:

This is useful to illustrate code to other users, but when, for example, we don't want to run it ourselves. Here, `install.packages()` will cause errors or warnings if we run it for a package which is already installed. Hence, we should not evaluate it when compiling our document:

```{r, eval = FALSE}
install.packages("rmarkdown")
```

### 3. Including code without output:

If you include `echo = TRUE, results = 'hide'` in the code chunk, it prevents printing of the output, but you see the code. Below is the `runif(7)` command, but you don't see the output:

```{r, echo = TRUE, results='hide'}
runif(7)
```

### 4. Including output without code:

If you include `echo = FALSE` in the code chunk, it will prevent printing of the R code that generated the output. Below is the output of the `runif(7)` command, but you don't see the code:

```{r, echo=FALSE}
runif(7)
```


### 5. Removing code and output:

Sometimes you want to load libraries, or create objects to use later, but don't want any code _or_ output yet. You can achieve this by including `echo = FALSE, include = FALSE` in the code chunk below:

```{r, echo = FALSE, include = FALSE}
library(MASS)
x <- Nile[1:10]
```

Note that nothing appeared from the code chunk above. Then later on in the code, you may want to use `x`. R will have created it, and be able to access it.

### Using R inline:

You can include variables inline too. This is best suited to short expressions and small variables. e.g., The first 10 values from the Nile dataset are stored in `x`. You can see them here: `r x`.

### Including equations:

**R Markdown** can be used to create very nice output for equations. e.g., the PDF for a random variable $Z \sim N(0, 1)$ (that is, Z is the standard normal random variable) is given by:

$$
\frac{1}{\sqrt{2 \pi \sigma^2}} e^{- \frac{(x - \mu)^2}{2 \sigma^2}}
$$

### Writing assignments in .Rmd

For both of your assignments, you will need to submit **.Rmd** files, as well as the HTML or pdf file produced from them.  

I strongly recommend writing an **.R** script with all of your solutions first. Then when you are happy with these, convert it piece-by-piece into your **.Rmd** script, along with all commentary and discussion of the results, methods etc. (Trying to write your R code *and* R Markdown document together can be confusing - when things don't work, is it because your R code is wrong, or the markdown syntax is wrong?)

Look carefully at the **.Rmd** file I produced to create this HTML document. Look at how I made lists, how I included words in **bold**, in *italics*, how I printed output that looks like `code` etc.

R Markdown is brilliant for allowing you to explain your analysis step-by-step, and present it in an easily shareable format (such as HTML or pdf) which anyone can open. As well as using it for your B9DA100 assignments, you should consider using it for other assignments too.

### Further links for help on this topic:

The internet is the best place for **R Markdown** resources. Have a look at the following links:

* For more details on using R Markdown see: <http://rmarkdown.rstudio.com>.
* Get an overview of R Markdown here: <https://rmarkdown.rstudio.com/authoring_quick_tour.html>
* For a very helpful cheat sheet, see the following link: <https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf>
* Work and read through this tutorial: <https://ourcodingclub.github.io/2016/11/24/rmarkdown-1.html>
* Look at the nice simple webpages that can be produced, such as this one here: <https://erdavenport.github.io/img/linear_models_in_R_no_answers_041014ERD.html>
* To create a pdf document, you need to install **LaTeX**. Feel free to try this if you want, but since it's a large programme, you can stick to using HTML for my course. Some more details here: <https://bookdown.org/yihui/rmarkdown/pdf-document.html>
* More tutorials here: <https://www.earthdatascience.org/courses/earth-analytics/document-your-science/knit-rmarkdown-document-to-pdf/>
* And some summary slides here: <http://miror-ejd.eu/wp-content/uploads/sites/34/2016/10/Introduction-to-Markdown.pdf>



